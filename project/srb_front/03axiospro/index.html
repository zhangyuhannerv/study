<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <script src="axios.js"></script>
  <script>
    const request = axios.create({
      baseURL: 'http://127.0.0.1:8080'// 主机地址
      , timeout: 1000// 超时时间，单位是毫秒
      , headers: {
        token: 'helen123'
      }
    })

    // 请求拦截器
    request.interceptors.request.use(
      (config) => {
        // 组装请求对象成功的时候
        console.log('请求拦截')
        console.log('config', config)
        // 测试更改令牌
        config.headers.token = 'helen123456'
        return config
      }, (error) => {
        // 组装请求对象失败的时候
        return Promise.reject(error)
      })

    // 响应拦截器
    request.interceptors.response.use(
      (response) => {
        console.log('response', response)
        return response.data
      },
      (error) => {
        // 对错误做点什么
        // ...
        return Promise.reject(error)
      }
    )

    request({
      url: '/user/list',
      method: 'get',
    }).then(response => {
      console.log('数据获取成功', response)
    }).catch(error => {
      console.error('数据获取失败', error)
    })

    // 另一种写法
    request.get('/user/list')
      .then(response => {
        console.log('数据获取成功', response)
      }).catch(error => {
        console.error('数据获取失败', error)
      })
  </script>
</body>

</html>